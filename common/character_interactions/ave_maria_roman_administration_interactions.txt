########################################################################################
#                                         											   #
# AVE MARIA Characters Interactions													   #
# A Very Extensive Modification for Appropriate Realism and Improved Authenticity	   #
#                                         											   #
# Roman Administration Characters Interactions             							   #
#                               													   #
########################################################################################

## Written by Atreides

# TABLE OF CONTENT:

##### 1) OFFICIALS ADMINISTRATIVE INTERACTIONS
##### 

##### 2) EMPEROR SPECIFIC INTERACTIONS
#####

##### 3) REVOLTS AND SCHEME INTERACTIONS
##### 


#############################################
# OFFICIALS INTERACTIONS					#
#############################################

### Signal interest to be a title successor by adding a claim on it
roman_administration_get_claim = {
	category = interaction_category_roman_administration
	common_interaction = yes
	
	use_diplomatic_range = yes

	is_shown = {
		scope:actor = {
			roman_administration_character_is_in_the_empire = yes
			NOT = { any_held_title = { this = title:e_byzantium } }
			NOT = { has_government = theocracy_government }
		}
		scope:recipient = { 
			roman_administration_character_is_in_the_empire = yes
			highest_held_title_tier >= tier_duchy 
			uses_roman_govt = yes
			NOT = { this = scope:actor }
			NOT = { any_held_title = { this = title:e_byzantium } }
		}
	}
	
	auto_accept = yes
	
	on_accept = {
		scope:actor = {
			add_unpressed_claim = scope:recipient.primary_title

			## Cost for bribes
			if = {
				limit = {
					scope:recipient = {
						roman_administration_holds_high_office_title_trigger = yes
					}
				}
				remove_short_term_gold = 50
			}
			else = {
				remove_short_term_gold = 25
			}
			## Add the stress impact
			if = {
				limit = {
					OR = {
						has_trait = introverted
						has_trait = shy
					}
				}
				## minor_stress_impact_gain
				add_stress = 10
			}
		}
	}

	# AI
	ai_targets = {
		ai_recipients = peer_vassals
	}
	ai_frequency = 48

	# ai_potential = {
		
	# }

	ai_will_do = {
		base = 50
		
		modifier = {
			factor = 0
			scope:recipient = {
				OR = {
					AND = {
						scope:actor = {
							ai_greed <= high_positive_ai_value
						}
						has_relation_friend = scope:actor
					}
					has_relation_best_friend = scope:actor
					has_relation_soulmate = scope:actor
				}
			}
		}

		modifier = {
			factor = 0
			scope:actor = {
				gold < 50
			}
		}

		modifier = {
			factor = 0
			scope:actor = {
				any_heir_to_title = {
					tier = tier_duchy
				}
			}
		}
		
		modifier = {
			factor = 0
			scope:actor = {
				any_claim = {
					tier = tier_duchy
					count >= 2
				}
			}
		}
	}
}

## Official interaction to favour a family member to another title
roman_administration_favour_family_member = {
	category = interaction_category_roman_administration

	use_diplomatic_range = yes
	auto_accept = yes

	is_shown = {
		scope:actor = {
			roman_administration_character_is_in_the_empire = yes
			NOT = { any_held_title = { this = title:e_byzantium } }
		}
		scope:recipient = { 
			roman_administration_character_is_in_the_empire = yes
			highest_held_title_tier >= tier_duchy 
			uses_roman_govt = yes
			NOT = { this = scope:actor }
			NOT = { any_held_title = { this = title:e_byzantium } }
		}
	}

	populate_recipient_list = {
		scope:actor = {
			every_close_family_member = {
				if = {
					limit = {
						is_landed = no
						age >= 20
						is_female = no
						NOR = { 
							has_trait = devoted 
							has_trait = blind
							has_trait = eunuch
						}
						NOT = {
							has_government = theocracy_government
						}
					}
					add_to_list = characters
				}				
			}
		}
	}
	
	on_accept = {
		scope:secondary_recipient = {
			add_unpressed_claim = scope:recipient.primary_title
			## Add some flag so it has a better score in the election
			add_opinion = {
				target = scope:actor
				modifier = roman_administration_favoured_me
				opinion = 10
			}
		}
		## Cost for bribes
		if = {
			limit = {
				scope:recipient = {
					roman_administration_holds_high_office_title_trigger = yes
				}
			}
			scope:actor = {
				remove_short_term_gold = 50
			}
			
		}
		else = {
			scope:actor = {
				remove_short_term_gold = 25
			}
		}
	}

	ai_potential = {
		#is_at_war = no
	}
	
	ai_targets = {
		ai_recipients = peer_vassals
	}
	ai_frequency = 24
	
	ai_will_do = {
		base = 100
		
		modifier = {
			factor = 0
			scope:recipient = {
				OR = {
					AND = {
						scope:actor = {
							ai_greed <= high_positive_ai_value
						}
						has_relation_friend = scope:actor
					}
					has_relation_best_friend = scope:actor
					has_relation_soulmate = scope:actor
				}
			}
		}

		modifier = {
			factor = 0
			scope:actor = {
				gold < 50
			}
		}

		modifier = {
			factor = 0
			scope:secondary_recipient = {
				any_heir_to_title = {
					tier = tier_duchy
				}
			}
		}

		modifier = {
			factor = 100
			scope:secondary_recipient = {
				OR = {
					AND = {
						scope:actor = {
							ai_greed <= high_positive_ai_value
						}
						has_relation_friend = scope:actor
					}
					has_relation_best_friend = scope:actor
					has_relation_soulmate = scope:actor
				}
			}
		}

		modifier = {
			factor = 1000
			scope:secondary_recipient = {
				is_close_family_of = scope:actor
			}
		}
	}
}

## Official interaction to send a family member to another official's court
roman_administration_send_family_member_for_training = {
	category = interaction_category_roman_administration

	use_diplomatic_range = yes
	auto_accept = yes

	is_shown = {
		scope:actor = {
			roman_administration_character_is_in_the_empire = yes
		}
		scope:recipient = { 
			roman_administration_character_is_in_the_empire = yes
			highest_held_title_tier >= tier_duchy 
			uses_roman_govt = yes
			NOT = { this = scope:actor }
			NOT = { 
				scope:secondary_recipient = {
					is_courtier_of = prev
				}
			}
		}
	}

	populate_recipient_list = {
		scope:actor = {
			every_close_family_member = {
				if = {
					limit = {
						is_landed = no
						age >= 20
						is_female = no
						NOR = { 
							has_trait = devoted 
							has_trait = blind
							has_trait = eunuch
						}
						NOT = {
							has_government = theocracy_government
						}
					}
					add_to_list = characters
				}				
			}
		}
	}
	
	on_accept = {
		scope:recipient = {
			add_courtier = scope:secondary_recipient
		}
		## Cost for bribes
		if = {
			limit = {
				scope:recipient = {
					roman_administration_holds_high_office_title_trigger = yes
				}
			}
			scope:actor = {
				remove_short_term_gold = 25
			}
			
		}
		else = {
			scope:actor = {
				remove_short_term_gold = 12
			}
		}
	}

	ai_potential = {
		#is_at_war = no
	}
	
	ai_targets = {
		ai_recipients = peer_vassals
	}
	ai_frequency = 6
	
	ai_will_do = {
		base = 0

		# modifier = {
		# 	factor = 50
		# 	scope:recipient = {
		# 		roman_administration_holds_tagma_title_trigger = yes
		# 	}
		# }
		
		
		# modifier = {
		# 	factor = 0
		# 	scope:recipient = {
		# 		OR = {
		# 			AND = {
		# 				scope:actor = {
		# 					ai_greed <= high_positive_ai_value
		# 				}
		# 				has_relation_friend = scope:actor
		# 			}
		# 			has_relation_best_friend = scope:actor
		# 			has_relation_soulmate = scope:actor
		# 		}
		# 	}
		# }

		# modifier = {
		# 	factor = 0
		# 	scope:actor = {
		# 		gold < 50
		# 	}
		# }

		# modifier = {
		# 	factor = 0
		# 	scope:secondary_recipient = {
		# 		any_heir_to_title = {
		# 			tier = tier_duchy
		# 		}
		# 	}
		# }

		# modifier = {
		# 	factor = 100
		# 	scope:secondary_recipient = {
		# 		OR = {
		# 			AND = {
		# 				scope:actor = {
		# 					ai_greed <= high_positive_ai_value
		# 				}
		# 				has_relation_friend = scope:actor
		# 			}
		# 			has_relation_best_friend = scope:actor
		# 			has_relation_soulmate = scope:actor
		# 		}
		# 	}
		# }

		# modifier = {
		# 	factor = 1000
		# 	scope:secondary_recipient = {
		# 		is_close_family_of = scope:actor
		# 	}
		# }
	}
}


#############################################
# EMPEROR INTERACTIONS						#
#############################################

## Emperor interaction to name a junior emperor
roman_administration_name_junior_emperor = {
	category = interaction_category_roman_administration
	interface_priority = 60

	desc = roman_administration_name_junior_emperor_desc

	is_shown = {
		scope:actor = {
			any_held_title = {
				this = title:e_byzantium
			}		
		}
		scope:recipient = { 
			NOT = { this = scope:actor }
			roman_administration_character_is_in_the_empire = yes
			age >= 6
			is_female = no
			# NOT = {
			# 	has_any_scripted_relation = scope:actor
			# }
			NOT = {
				has_trait = junior_emperor
			}
			NOR = {
				has_government = theocracy_government
				has_government = feudal_government
			}
		}
	}

	is_valid_showing_failures_only = {
		scope:recipient = {
			is_diplomatically_available = yes
		}
		# custom_description = {
		# 	title:e_byzantium = {
		# 		any_election_candidate = {
		# 			this = scope:recipient
		# 		}
		# 	}
		# 	text = "roman_administration_name_junior_emperor_candidate_requirement"
		# }
		custom_description = {
			scope:recipient.top_liege = scope:actor.top_liege
			text = "same_realm_as"
		}
	}

	on_accept = {
		scope:actor = {
			every_relation = {
				type = junior_emperor
				#scope:actor = { remove_relation_junior_emperor = prev }
				
				hidden_effect = { scope:actor = { remove_relation_junior_emperor = prev } }
				remove_trait = junior_emperor
				add_opinion = {
					target = scope:actor
					modifier = roman_administration_fire_junior_emperor
				}
			}
			# if = {
			# 	limit = {
			# 		exists = cp:roman_councillor_coemperor
			# 	}
			# 	fire_councillor = cp:roman_councillor_coemperor
			# }
			# assign_councillor_type = {
			# 	type = roman_councillor_coemperor
			# 	target = scope:recipient
			# }

			#set_relation_junior_emperor = scope:recipient
		}

		scope:recipient = {
			set_relation_junior_emperor = scope:actor
			add_trait = junior_emperor
		}
	}

	cost = {
		prestige = {
			value = {
				add = 100
				if = {
					limit = {
						scope:actor = { 
							any_relation = {
								type = junior_emperor
							}
						}
					}
					add = 1000
				}
			}
		}
	}

	auto_accept = yes

	ai_potential = {

	}

	ai_targets = {
		ai_recipients = family
	}

	ai_frequency = 96

	ai_will_do = {
		base = 0

		modifier = {
			add = 100
			scope:recipient = {
				NOT = {
					OR = {
						has_relation_rival = scope:actor
						has_relation_nemesis = scope:actor
					}
				}
			}
		}

		modifier = {
			add = 500
			scope:recipient = {
				is_adult = yes
				is_female = no
				is_child_of = scope:actor
			}
		}

		modifier = {
			add = 100 
			title:e_byzantium = {
				any_election_candidate = {
					this = scope:recipient
				}
			}
		}

		modifier = {
			add = -100
			scope:actor = {
				any_relation = {
					type = junior_emperor
				}
			}
		}

		modifier = {
			add = 50
			scope:recipient = {
				is_child_of = scope:actor
			}
		}

		modifier = {
			add = 50
			scope:recipient = {
				NOT = { is_primary_heir_of = root }
			}
		}

		modifier = {
			add = -500
			scope:recipient = {
				OR = {
					has_trait = inbred
					has_trait = intellect_bad_3
					has_trait = incapable
				}
			}
		}
	}
}

## Emperor interaction to favour a successor to a title
roman_administration_favour_successor = {
	category = interaction_category_roman_administration
	common_interaction = yes

	use_diplomatic_range = yes
	auto_accept = yes

	is_shown = {
		scope:actor = {
			any_held_title = {
				this = title:e_byzantium
			}			
		}
		scope:recipient = { 
			NOT = { this = scope:actor }
			roman_administration_character_is_in_the_empire = yes
			highest_held_title_tier >= tier_duchy 
			NOT = { has_government = theocracy_government }					
		}
	}

	populate_recipient_list = {
		scope:actor = {
			every_courtier = {
				limit = {
					is_female = no
					age >= 18
					NOR = {
						has_trait = devoted
						# has_trait = priest
					}
				}
				add_to_list = characters
			}
			every_vassal = {
				limit = {
					top_liege = scope:actor
					is_female = no
					age >= 18
					highest_held_title_tier < tier_duchy
					NOT = {
						has_government = theocracy_government
					}
					NOR = {
						has_trait = devoted
						# has_trait = priest
					}
				}
				add_to_list = characters

				every_courtier = {
					limit = {
						is_female = no
						age >= 18
						highest_held_title_tier < tier_duchy
						NOR = {
							has_trait = devoted
							# has_trait = priest
						}
					}
					add_to_list = characters
				}
			}
		}
	}
	
	on_accept = {
		scope:secondary_recipient = {
			add_unpressed_claim = scope:recipient.primary_title
			## Add some flag so it has a better score in the election
			add_character_modifier = roman_administration_emperor_favourite
			add_opinion = {
				target = scope:actor
				modifier = roman_administration_favoured_me
				opinion = 25
			}
		}
	}

	ai_potential = {
		#is_at_war = no
	}
	
	ai_targets = {
		ai_recipients = vassals
	}
	ai_frequency = 6
	
	ai_will_do = {
		base = 100
		
		modifier = {
			factor = 0
			scope:recipient = {
				OR = {
					AND = {
						scope:actor = {
							ai_greed <= high_positive_ai_value
						}
						has_relation_friend = scope:actor
					}
					has_relation_best_friend = scope:actor
					has_relation_soulmate = scope:actor
				}
			}
		}

		modifier = {
			factor = 100
			scope:secondary_recipient = {
				OR = {
					AND = {
						scope:actor = {
							ai_greed <= high_positive_ai_value
						}
						has_relation_friend = scope:actor
					}
					has_relation_best_friend = scope:actor
					has_relation_soulmate = scope:actor
				}
			}
		}
	}
}

## Emperor interaction to fire an official
roman_administration_fire_bureaucrat = {
	category = interaction_category_roman_administration
	common_interaction = yes
	use_diplomatic_range = yes

	is_shown = {
		scope:actor = {
			any_held_title = {
				this = title:e_byzantium
			}			
		}
		scope:recipient = { 
			NOT = { this = scope:actor }
			roman_administration_character_is_in_the_empire = yes
			highest_held_title_tier >= tier_duchy 
			NOR = {
				has_government = theocracy_government
				has_government = feudal_government
				has_government = clan_government
				has_government = tribal_government
			}				
		}
	}

	auto_accept = yes
	
	ai_potential = {
		is_at_war = no
		NOR = {
			has_trait = forgiving
			has_trait = compassionate
			has_trait = patient
			has_trait = trusting
			has_trait = calm
		}
	}

	on_accept = {
		scope:recipient = {
			every_held_title = {
				limit = {
					tier >= tier_duchy
				}
				current_heir = {
					save_scope_as = new_holder
				}
				every_in_de_jure_hierarchy = {
					limit = {
						tier = tier_county
						NOT = { 
							this = { has_title_law = ave_maria_roman_administration_family_succession_law }
							has_title_law = ave_maria_roman_administration_family_succession_law							
						}
						NOT = { this = title:c_byzantion }
						holder = {
							roman_administration_character_is_in_the_empire = yes
						}
					}
					create_title_and_vassal_change = {
						type = granted
						save_scope_as = change
						add_claim_on_loss = yes
					}
					change_title_holder = {
						holder = scope:new_holder
						change = scope:change
					}
					resolve_title_and_vassal_change = scope:change
				}
			}
			every_held_title = {
				limit = {
					tier >= tier_duchy
				}
				create_title_and_vassal_change = {
					type = granted
					save_scope_as = change
					add_claim_on_loss = yes
				}
				change_title_holder = {
					holder = scope:new_holder
					change = scope:change
				}
				resolve_title_and_vassal_change = scope:change
			}
			
			add_opinion = {
				target = scope:actor
				modifier = roman_administration_fired_me
				opinion = -25
			}

			## Clear variable and modifiers
			hidden_effect = {
				remove_character_modifier = roman_administration_terms_of_office_0
				remove_character_modifier = roman_administration_terms_of_office_1
				remove_character_modifier = roman_administration_terms_of_office_2
				remove_character_modifier = roman_administration_terms_of_office_3
				remove_character_modifier = roman_administration_terms_of_office_4
				remove_character_modifier = roman_administration_terms_of_office_5
				remove_variable = roman_administration_term_count
			}

			scope:new_holder = {
				remove_character_modifier = roman_administration_emperor_favourite
				# trigger_event = ave_maria_roman_administration_events.00012
			}
		}

		scope:actor = {
			if = {
				limit = {
					scope:recipient = {
						roman_administration_holds_high_office_title_trigger = yes
					}
				}
				add_tyranny = 5
				custom_tooltip = ave_maria_roman_administration_massive_popularity_loss.tt
				change_variable = {
					name = roman_administration_popularity
					add = -20
				}
				roman_administration_update_popularity_level_display = yes
			}			

			## Add the stress impact
			if = {
				limit = {
					OR = {
						has_trait = introverted
						has_trait = shy
						has_trait = sentimental
						has_trait = craven
						has_trait = faithful
						has_trait = just
					}
				}
				## minor_stress_impact_gain
				add_stress = 10
			}
			if = {
				limit = {
					OR = {
						has_trait = zealous
						has_trait = arbitrary
					}
				}
				## minor_stress_impact_loss
				add_stress = -10
			}
		}
	}

	ai_targets = {
		ai_recipients = vassals
		max = 20
	}

	ai_frequency = 24

	ai_will_do = {
		base = 0
		
		modifier = {
			add = 100
			scope:recipient = {
				OR = {
					has_relation_rival = scope:actor
					has_relation_nemesis = scope:actor
				}
			}
		}
		
		modifier = {
			add = 100
			scope:recipient = {
				is_primary_heir_of = scope:actor
				OR = {
					has_trait = inbred
					has_trait = intellect_bad_3
					has_trait = incapable
				}
			}
		}
		
		modifier = {
			add = 5
			ai_vengefulness >= medium_positive_ai_value
			scope:recipient = {
				is_heir_of = scope:actor
			}
			OR = {
				AND = {
					scope:recipient = {
						has_trait = incestuous
					}
					NOT = { is_incestuous_trigger = yes }
					trait_is_criminal_in_faith_trigger = { TRAIT = incestuous FAITH = scope:actor.faith GENDER_CHARACTER = scope:recipient }
				}
				AND = {
					scope:recipient = {
						has_trait = kinslayer
					}
					NOT = { has_trait = kinslayer }
				}
				AND = {
					scope:recipient = {
						has_trait = adulterer
					}
					NOR = {
						has_trait = adulterer
						has_trait = fornicator
					}
					trait_is_criminal_in_faith_trigger = { TRAIT = adulterer FAITH = scope:actor.faith GENDER_CHARACTER = scope:recipient }
				}
				AND = {
					scope:recipient = {
						has_trait = fornicator
					}
					NOR = {
						has_trait = adulterer
						has_trait = fornicator
					}
					trait_is_criminal_in_faith_trigger = { TRAIT = fornicator FAITH = scope:actor.faith GENDER_CHARACTER = scope:recipient }
				}
				AND = {
					scope:recipient = {
						has_trait = deviant
					}
					NOT = {
						is_deviant_trigger = yes
					}
					trait_is_criminal_in_faith_trigger = { TRAIT = deviant FAITH = scope:actor.faith GENDER_CHARACTER = scope:recipient }
				}
				AND = {
					scope:recipient = {
						has_trait = witch
					}
					NOT = {
						is_witch_trigger = yes
					}
					trait_is_criminal_in_faith_trigger = { TRAIT = witch FAITH = scope:actor.faith GENDER_CHARACTER = scope:recipient }
				}
				AND = {
					scope:recipient = {
						has_trait = sodomite
					}
					NOR = {
						has_trait = sodomite
						any_secret = {
							secret_type = secret_homosexual
						}
					}
					trait_is_criminal_in_faith_trigger = { TRAIT = sodomite FAITH = scope:actor.faith GENDER_CHARACTER = scope:recipient }
				}
				AND = {
					scope:recipient = {
						has_trait = cannibal
					}
					NOT = {
						is_cannibal_trigger = yes
					}
					trait_is_criminal_in_faith_trigger = { TRAIT = cannibal FAITH = scope:actor.faith GENDER_CHARACTER = scope:recipient }
				}
			}
		}
		
		modifier = {
			factor = 0
			scope:recipient = {
				OR = {
					has_relation_friend = scope:actor
					has_relation_best_friend = scope:actor
				}
			}
		}
		
		modifier = {
			factor = 0
			scope:recipient = {
				is_ai = no
			}
		}

		modifier = {
			add = 25
			scope:actor = {
				dynasty = {
					any_dynasty_member = {
						NOT = {
							this = scope:recipient
						}
					}
				}
				
			}
			scope:recipient = {
				any_held_title = {
					this = title:d_megas_domestikos
				}
			}
		}

		modifier = {
			add = -100
			scope:actor = {
				has_variable = roman_administration_popularity
				var:roman_administration_popularity <= 70
			}
		}
	}
}

## Emperor interaction to replace an official
roman_administration_replace_bureaucrat = {
	category = interaction_category_roman_administration
	common_interaction = yes
	use_diplomatic_range = yes
	auto_accept = yes

	is_shown = {
		scope:actor = {
			any_held_title = {
				this = title:e_byzantium
			}			
		}
		scope:recipient = { 
			NOT = { this = scope:actor }
			roman_administration_character_is_in_the_empire = yes
			highest_held_title_tier >= tier_duchy 
			NOR = {
				has_government = theocracy_government
				has_government = feudal_government
				has_government = clan_government
				has_government = tribal_government
			}							
		}
	}

	populate_recipient_list = {
		scope:actor = {
			every_courtier = {
				limit = {
					is_female = no
					age >= 18
					NOR = {
						has_trait = devoted
						# has_trait = priest
					}
				}
				add_to_list = characters
			}
			every_vassal = {
				limit = {
					top_liege = scope:actor
					is_female = no
					age >= 18
					highest_held_title_tier <= tier_duchy
					NOT = {
						has_government = theocracy_government
					}
					NOR = {
						has_trait = devoted
						# has_trait = priest
					}
				}
				add_to_list = characters

				every_courtier = {
					limit = {
						is_female = no
						age >= 18
						highest_held_title_tier < tier_duchy
						NOR = {
							has_trait = devoted
							# has_trait = priest
						}
					}
					add_to_list = characters
				}
			}
		}
	}

	on_accept = {
		scope:recipient = {
			random_held_title = {
				limit = {
					tier >= tier_duchy
				}

				if = {
					limit = {
						scope:secondary_recipient = {
							is_landed = no
						}
					}
					save_temporary_scope_as = recipient_ducal_title
					scope:recipient_ducal_title = { 
						every_in_de_jure_hierarchy = {
							limit = {
								tier = tier_county
								NOT = { 
									this = { has_title_law = ave_maria_roman_administration_family_succession_law }
									has_title_law = ave_maria_roman_administration_family_succession_law							
								}
								NOT = { this = title:c_byzantion }
								holder = {
									roman_administration_character_is_in_the_empire = yes
								}
							}
							create_title_and_vassal_change = {
								type = granted
								save_scope_as = change
								add_claim_on_loss = yes
							}
							change_title_holder = {
								holder = scope:secondary_recipient
								change = scope:change
							}
							resolve_title_and_vassal_change = scope:change
						}
					}
					scope:recipient_ducal_title = {
						create_title_and_vassal_change = {
							type = granted
							save_scope_as = change
							add_claim_on_loss = yes
						}
						change_title_holder = {
							holder = scope:secondary_recipient
							change = scope:change
						}
						resolve_title_and_vassal_change = scope:change
					}
				}

				if = {
					limit = {
						scope:secondary_recipient = {
							is_landed = yes
						}
					}
					save_temporary_scope_as = recipient_ducal_title
					scope:recipient_ducal_title = {
						create_title_and_vassal_change = {
							type = granted
							save_scope_as = change
							add_claim_on_loss = yes
						}
						change_title_holder = {
							holder = scope:secondary_recipient
							change = scope:change
						}
						resolve_title_and_vassal_change = scope:change
					}

					scope:recipient_ducal_title = { 
						every_in_de_jure_hierarchy = {
							limit = {
								tier = tier_county
								NOT = { 
									this = { has_title_law = ave_maria_roman_administration_family_succession_law }
									has_title_law = ave_maria_roman_administration_family_succession_law							
								}
								NOT = { this = title:c_byzantion }
								holder = {
									roman_administration_character_is_in_the_empire = yes
								}
							}
							create_title_and_vassal_change = {
								type = granted
								save_scope_as = change
								add_claim_on_loss = yes
							}
							change_title_holder = {
								holder = scope:secondary_recipient
								change = scope:change
							}
							resolve_title_and_vassal_change = scope:change
						}
					}
				}

				
			}

			## Clear variable and modifiers
			hidden_effect = {
				remove_character_modifier = roman_administration_terms_of_office_0
				remove_character_modifier = roman_administration_terms_of_office_1
				remove_character_modifier = roman_administration_terms_of_office_2
				remove_character_modifier = roman_administration_terms_of_office_3
				remove_character_modifier = roman_administration_terms_of_office_4
				remove_character_modifier = roman_administration_terms_of_office_5
				remove_variable = roman_administration_term_count
			}

			add_opinion = {
				target = scope:actor
				modifier = roman_administration_fired_me
				opinion = -25
			}					
		}

		## Add some opinion
		scope:secondary_recipient = {
			add_opinion = {
				target = scope:actor
				modifier = roman_administration_favoured_me
				opinion = 25
			}
			remove_character_modifier = roman_administration_emperor_favourite
			# trigger_event = ave_maria_roman_administration_events.00012

			if = {
				limit = {
					highest_held_title_tier >= tier_duchy
					uses_roman_govt = yes
				}
				every_held_title = {
					limit = {
						tier >= tier_duchy
						NOT = {
							this = scope:recipient_ducal_title
						}
					}
					current_heir = {
						save_scope_as = new_holder
					}
					save_temporary_scope_as = ducal_title

					

					every_in_de_jure_hierarchy = {
						limit = {
							tier = tier_county
							NOT = { 
								this = { has_title_law = ave_maria_roman_administration_family_succession_law }
								has_title_law = ave_maria_roman_administration_family_succession_law							
							}
							NOT = { this = title:c_byzantion }
							holder = {
								roman_administration_character_is_in_the_empire = yes
							}
						}
						create_title_and_vassal_change = {
							type = granted
							save_scope_as = change
							add_claim_on_loss = yes
						}
						change_title_holder = {
							holder = scope:new_holder
							change = scope:change
						}
						resolve_title_and_vassal_change = scope:change
					}
				}
				scope:ducal_title = {
					create_title_and_vassal_change = {
						type = granted
						save_scope_as = change
						add_claim_on_loss = yes
					}
					change_title_holder = {
						holder = scope:new_holder
						change = scope:change
					}
					resolve_title_and_vassal_change = scope:change
				}
				
			}
		}	

		scope:actor = {
			if = {
				limit = {
					scope:recipient = {
						roman_administration_holds_high_office_title_trigger = yes
					}
				}
				add_tyranny = 5
				#roman_administration_remove_popularity_massive_amount = yes
				custom_tooltip = ave_maria_roman_administration_massive_popularity_loss.tt
				change_variable = {
					name = roman_administration_popularity
					add = -20
				}
				roman_administration_update_popularity_level_display = yes
			}

			## Add the stress impact
			if = {
				limit = {
					OR = {
						has_trait = introverted
						has_trait = shy
						has_trait = sentimental
						has_trait = craven
						has_trait = faithful
						has_trait = just
					}
				}
				## minor_stress_impact_gain
				add_stress = 10
			}
			if = {
				limit = {
					OR = {
						has_trait = zealous
						has_trait = arbitrary
					}
				}
				## minor_stress_impact_loss
				add_stress = -10
			}
		}
	}

	ai_potential = {
		#is_at_war = no
	}
	
	ai_targets = {
		ai_recipients = vassals
	}
	ai_frequency = 12
	
	ai_will_do = {
		base = 0
		
		modifier = {
			add = 100
			scope:recipient = {
				OR = {
					has_relation_rival = scope:actor
					has_relation_nemesis = scope:actor
				}
			}
		}
		
		modifier = {
			add = 100
			scope:recipient = {
				is_primary_heir_of = scope:actor
				OR = {
					has_trait = inbred
					has_trait = intellect_bad_3
					has_trait = incapable
				}
			}
		}
		
		modifier = {
			add = 5
			ai_vengefulness >= medium_positive_ai_value
			scope:recipient = {
				is_heir_of = scope:actor
			}
			OR = {
				AND = {
					scope:recipient = {
						has_trait = incestuous
					}
					NOT = { is_incestuous_trigger = yes }
					trait_is_criminal_in_faith_trigger = { TRAIT = incestuous FAITH = scope:actor.faith GENDER_CHARACTER = scope:recipient }
				}
				AND = {
					scope:recipient = {
						has_trait = kinslayer
					}
					NOT = { has_trait = kinslayer }
				}
				AND = {
					scope:recipient = {
						has_trait = adulterer
					}
					NOR = {
						has_trait = adulterer
						has_trait = fornicator
					}
					trait_is_criminal_in_faith_trigger = { TRAIT = adulterer FAITH = scope:actor.faith GENDER_CHARACTER = scope:recipient }
				}
				AND = {
					scope:recipient = {
						has_trait = fornicator
					}
					NOR = {
						has_trait = adulterer
						has_trait = fornicator
					}
					trait_is_criminal_in_faith_trigger = { TRAIT = fornicator FAITH = scope:actor.faith GENDER_CHARACTER = scope:recipient }
				}
				AND = {
					scope:recipient = {
						has_trait = deviant
					}
					NOT = {
						is_deviant_trigger = yes
					}
					trait_is_criminal_in_faith_trigger = { TRAIT = deviant FAITH = scope:actor.faith GENDER_CHARACTER = scope:recipient }
				}
				AND = {
					scope:recipient = {
						has_trait = witch
					}
					NOT = {
						is_witch_trigger = yes
					}
					trait_is_criminal_in_faith_trigger = { TRAIT = witch FAITH = scope:actor.faith GENDER_CHARACTER = scope:recipient }
				}
				AND = {
					scope:recipient = {
						has_trait = sodomite
					}
					NOR = {
						has_trait = sodomite
						any_secret = {
							secret_type = secret_homosexual
						}
					}
					trait_is_criminal_in_faith_trigger = { TRAIT = sodomite FAITH = scope:actor.faith GENDER_CHARACTER = scope:recipient }
				}
				AND = {
					scope:recipient = {
						has_trait = cannibal
					}
					NOT = {
						is_cannibal_trigger = yes
					}
					trait_is_criminal_in_faith_trigger = { TRAIT = cannibal FAITH = scope:actor.faith GENDER_CHARACTER = scope:recipient }
				}
			}
		}

		modifier = {
			add = -100
			scope:actor = {
				has_variable = roman_administration_popularity
				var:roman_administration_popularity <= 70
			}
		}

		modifier = {
			add = 25
			scope:actor = {
				dynasty = {
					any_dynasty_member = {
						NOT = {
							this = scope:recipient
						}
					}
				}				
			}
			scope:recipient = {
				any_held_title = {
					this = title:d_megas_domestikos
				}
			}
		}
		
		modifier = {
			factor = 0
			scope:recipient = {
				OR = {
					has_relation_friend = scope:actor
					has_relation_best_friend = scope:actor
				}
			}
		}
		
		modifier = {
			factor = 0
			scope:recipient = {
				is_ai = no
			}
		}
	}
}

## Modify Vassal Contract
roman_administration_change_vassal_contract = {
	special_interaction = modify_vassal_contract
	interface = modify_vassal_contract
	category = interaction_category_vassal
	common_interaction = yes

	send_name = "modify_vassal_contract_interaction_SEND"
	desc = liege_modify_vassal_contract_interaction_desc

	force_notification = yes
	notification_text = MODIFY_VASSAL_CONTRACT_NOTIFICATION_TO_VASSAL
	
	is_shown = {
		scope:recipient = {
			NOT = { this = scope:actor }
			uses_roman_govt = yes
			exists = liege
			liege = scope:actor
			is_ruler = yes
			vassal_contract_has_modifiable_obligations = yes
		}
		scope:actor = {
			uses_roman_govt = yes
		}
	}

	is_valid_showing_failures_only = {
		scope:recipient = { 
			is_diplomatically_available = yes
		} 
		NOT = { scope:actor = { is_at_war_with = scope:recipient } } 
	}

	can_send = {
		custom_description = {
			text = "roman_administration_change_contract_timer"
			scope:recipient = {			
				NOT = {
					has_variable = roman_administration_cannot_change_contract
				}
			}
		}
				
			
		## Cannot change more than three things at once
		custom_description = {
			text = "vassal_modify_vassal_contract_obligation_change_limit"
			value = scope:recipient.count_total_obligation_changes
			scope:recipient.count_total_obligation_changes <= max_contract_changes
		}
	}

	auto_accept = yes

	on_accept = {
		scope:actor = {
			
			send_interface_message = {
				type = msg_vassal_contract_change
				title = modify_vassal_contract_interaction_notification
				right_icon = scope:recipient

				if = {
					limit = { 
						always = scope:hook 
						scope:recipient = { count_obligation_improvements_for_vassal < 0 }
					}
					use_hook = scope:recipient
				}

				if = {
					limit = {
						NOT = { always = scope:hook }
						scope:recipient = { count_obligation_improvements_for_vassal < 0 }
					}
					custom_tooltip = roman_administration_change_vassal_contract_popularity_loss
					scope:actor = {
						change_variable = {
							name = roman_administration_popularity
							subtract = 20
						}
					}
					
				}

				if = {
					limit = {
						NOT = { always = scope:hook }
						scope:recipient = { count_obligation_improvements_for_vassal_include_hook > 0 }
					}
					custom_tooltip = roman_administration_change_vassal_contract_popularity_gain
					scope:actor = {
						change_variable = {
							name = roman_administration_popularity
							add = 20
						}
					}					
				}
				
				scope:recipient = {
					hidden_effect = { 
						set_variable = {
							name = roman_administration_cannot_change_contract
							value = yes
							days = 1000
						}
					}

					roman_administration_set_tax_level = { TAX_OBLIGATION_TYPE = imperial_obligation_tax }
					roman_administration_set_district_type = { DISTRICT_OBLIGATION_TYPE = ave_maria_roman_administration_special_contract }
					hidden_effect = {
						roman_administration_update_government_after_contract_change = yes
					}					
					
					if = {
						limit = {
							has_government = roman_administration_theme_government
						}
						roman_administration_set_obligation_if_changed_effect = { AM_OBLIGATION_TYPE = imperial_obligation_theme }
					}
					if = {
						limit = {
							has_government = roman_administration_doukaton_government
						}
						roman_administration_set_obligation_if_changed_effect = { AM_OBLIGATION_TYPE = imperial_obligation_doukaton }
					}
					if = {
						limit = {
							has_government = roman_administration_kouratoreia_government
						}
						roman_administration_set_obligation_if_changed_effect = { AM_OBLIGATION_TYPE = imperial_obligation_kouratoreia }
					}	
					if = {
						limit = {
							OR = {
								has_government = roman_administration_sekreton_government
								has_government = roman_administration_military_government
							}
						}
						roman_administration_set_salary_level = { SALARY_OBLIGATION_TYPE = imperial_high_office_salary }
					}				

					
					
				}
			}
		}
	}

	send_option = {
		is_valid = {
			scope:actor = {
				has_usable_hook = scope:recipient
			}
		}
		flag = hook
		localization = SCHEME_HOOK
	}
	should_use_extra_icon = {
		scope:actor = { has_usable_hook = scope:recipient }
	}
	extra_icon = "gfx/interface/icons/character_interactions/hook_icon.dds"

	send_options_exclusive = no
	
	ai_will_do = {
		base = 0
	}
}

## Emperor interaction to convert a feudal to a doukaton
roman_administration_convert_feudal = {
	category = interaction_category_vassal
	common_interaction = yes

	desc = roman_administration_convert_feudal_desc

	is_shown = {
		scope:actor = {
			any_held_title = {
				this = title:e_byzantium
			}		
		}
		scope:recipient = { 
			roman_administration_character_is_in_the_empire = yes
			is_landed = yes
			uses_roman_govt = no
		}
	}

	is_valid = {
		scope:actor = {
			any_held_title = {
				this = title:e_byzantium
			}		
			prestige >= 100
			gold >= 500 
		}
		scope:recipient = { 
			roman_administration_character_is_in_the_empire = yes
			is_landed = yes
			#is_ruler = yes
			uses_roman_govt = no
		}
		scope:recipient = {
			opinion = {
				target = scope:actor
				value >= medium_positive_opinion
			}
		}
	}

	auto_accept = yes

	cost = {
		prestige = 100
		gold = {
			value = {
				add = 100
				if = {
					limit = {
						scope:recipient.primary_title = {
							tier = tier_duchy
						}
					}
					add = 400
				}
				if = {
					limit = {
						scope:recipient.primary_title = {
							tier > tier_duchy
						}
					}
					add = 500
				}
			}
		}
		
	}

	on_accept = {
		scope:recipient = {
			if = {
				limit = {
					scope:recipient = {
						highest_held_title_tier >= tier_duchy
					}
					OR = {
						scope:recipient.primary_title = {
							any_in_de_jure_hierarchy = {
								tier = tier_county
								#continue = { tier > tier_barony }
								any_neighboring_county = {
									tier = tier_county
									holder = {
										NOT = {
											any_liege_or_above = {
												this = title:e_byzantium.holder
											}
										}
									}
								}
							}					
						}
						scope:recipient = {
							any_vassal = {
								primary_title = {
									any_in_de_jure_hierarchy = {
										tier = tier_county
										#continue = { tier > tier_barony }
										any_neighboring_county = {
											tier = tier_county
											holder = {
												NOT = {
													any_liege_or_above = {
														this = title:e_byzantium.holder
													}
												}
											}
										}
									}	
								}
							}
						}
						any_held_title = {
							any_in_de_jure_hierarchy = {
								tier = tier_county
								#continue = { tier > tier_barony }
								any_neighboring_county = {
									tier = tier_county
									holder = {
										NOT = {
											any_liege_or_above = {
												this = title:e_byzantium.holder
											}
										}
									}
								}
							}	
						}
					}
					
				}
				change_government = roman_administration_doukaton_government
				vassal_contract_set_obligation_level = {
					type = ave_maria_roman_administration_special_contract
					level = 1
				}
				scope:recipient.primary_title = {
					add_title_law = ave_maria_roman_administration_tagma_succession_law
					add_title_law = male_only_law 
				}
			}
			if = {
				limit = {
					scope:recipient = {
						highest_held_title_tier < tier_duchy
					}
				}
				change_government = roman_administration_government
			}
			if = {
				limit = {
					scope:recipient = {
						highest_held_title_tier >= tier_duchy
					}
					NOR = {
						scope:recipient.primary_title = {
							any_in_de_jure_hierarchy = {
								tier = tier_county
								#continue = { tier > tier_barony }
								any_neighboring_county = {
									tier = tier_county
									holder = {
										NOT = {
											any_liege_or_above = {
												this = title:e_byzantium.holder
											}
										}
									}
								}
							}					
						}
						scope:recipient = {
							any_vassal = {
								primary_title = {
									any_in_de_jure_hierarchy = {
										tier = tier_county
										#continue = { tier > tier_barony }
										any_neighboring_county = {
											tier = tier_county
											holder = {
												NOT = {
													any_liege_or_above = {
														this = title:e_byzantium.holder
													}
												}
											}
										}
									}	
								}
							}
						}
						any_held_title = {
							any_in_de_jure_hierarchy = {
								tier = tier_county
								#continue = { tier > tier_barony }
								any_neighboring_county = {
									tier = tier_county
									holder = {
										NOT = {
											any_liege_or_above = {
												this = title:e_byzantium.holder
											}
										}
									}
								}
							}	
						}
					}
				}
				change_government = roman_administration_theme_government
				vassal_contract_set_obligation_level = {
					type = imperial_obligation_theme
					level = 0
				}
				scope:recipient.primary_title = {
					add_title_law = ave_maria_roman_administration_tagma_succession_law
					add_title_law = male_only_law 
				}
			}
		}
		scope:actor = {
			if = {
				limit = {
					title:e_byzantium = {
						any_in_de_jure_hierarchy = {
							this = scope:recipient.primary_title
						}
					}
				}
				change_variable = {
					name = roman_administration_legitimacy
					add = 10
				}
				roman_administration_update_legitimacy_level_display = yes
				change_variable = {
					name = roman_administration_popularity
					add = 10
				}
				roman_administration_update_popularity_level_display = yes
				custom_tooltip = ave_maria_roman_administration_normal_popularity_gain.tt
				custom_tooltip = ave_maria_roman_administration_normal_legitimacy_gain.tt
			}
		}
	}
}

## Emperor naming a Protospatharios
roman_administration_name_protospatharios = {
	category = interaction_category_vassal

	use_diplomatic_range = yes
	auto_accept = yes

	desc = roman_administration_name_protospatharios_desc

	is_shown = {
		scope:actor = {
			any_held_title = {
				this = title:e_byzantium
			}			

		}
		scope:recipient = { 
			roman_administration_character_is_in_the_empire = yes
			NOT = { has_government = theocracy_government }
			age >= 16
			is_female = no			
			NOT = {
				has_character_modifier = roman_administration_protospatharios
			}	
			NOT = {
				this = scope:actor
			}		
		}
	}

	is_valid = {
		scope:actor = {
			any_held_title = {
				this = title:e_byzantium
			}			
		}
		scope:recipient = { 
			roman_administration_character_is_in_the_empire = yes
			age >= 16
			is_female = no			
			NOT = {
				has_character_modifier = roman_administration_protospatharios
			}			
		}
	}

	on_accept = {
		scope:actor = {
			every_relation = {
				type = protospatharios
				
				hidden_effect = { 
					
				}
				scope:actor = { 
					remove_relation_protospatharios = prev 
					remove_opinion = {
						modifier = roman_administration_dignity
						target = prev
					}
					add_opinion = {
						target = prev
						modifier = roman_administration_fire_dignities
					}
				} 
				remove_character_modifier = roman_administration_protospatharios
				
			}
			
		}
		scope:recipient = {
			set_relation_protospatharios = scope:actor
			add_opinion = {
				target = scope:actor
				modifier = roman_administration_dignity
				days = 800
			}
			add_character_modifier = {
				modifier = roman_administration_protospatharios
			}
		}
	}

	ai_targets = {
		ai_recipients = vassals
	}

	ai_frequency = 48

	ai_will_do = {
		base = 0

		modifier = {
			add = 100
			scope:recipient = {
				NOT = {
					OR = {
						has_relation_rival = scope:actor
						has_relation_nemesis = scope:actor
					}
				}
			}
		}

		modifier = {
			add = -100
			scope:recipient = {
				OR = {
					has_relation_rival = scope:actor
					has_relation_nemesis = scope:actor
				}
			}
		}

		modifier = {
			add = -200
			scope:recipient = {
				opinion = {
					target = scope:actor
					value >= 60
				}
			}
		}

		modifier = {
			add = -500
			scope:recipient = {
				opinion = {
					target = scope:actor
					value >= 80
				}
			}
		}

		modifier = {
			add = 200
			scope:recipient = {
				is_adult = yes
				is_female = no
				is_child_of = scope:actor
			}
		}

		modifier = {
			add = 200
			scope:recipient = {
				is_powerful_vassal = yes
				opinion = {
					target = scope:actor
					value <= 0
				}
			}
		}

		modifier = {
			add = -500
			scope:recipient = {
				OR = {
					has_trait = inbred
					has_trait = intellect_bad_3
					has_trait = incapable
				}
			}
		}
	}
}

## Emperor naming a Patrikios
roman_administration_name_patrikios = {
	category = interaction_category_vassal

	use_diplomatic_range = yes
	auto_accept = yes

	desc = roman_administration_name_patrikios_desc

	is_shown = {
		scope:actor = {
			any_held_title = {
				this = title:e_byzantium
			}			
		}
		scope:recipient = { 
			roman_administration_character_is_in_the_empire = yes
			NOT = { has_government = theocracy_government }
			age >= 16
			is_female = no			
			NOT = {
				has_character_modifier = roman_administration_patrikios
			}	
			NOT = {
				this = scope:actor
			}		
		}
	}

	is_valid = {
		scope:actor = {
			any_held_title = {
				this = title:e_byzantium
			}			
		}
		scope:recipient = { 
			roman_administration_character_is_in_the_empire = yes
			age >= 16
			is_female = no			
			NOT = {
				has_character_modifier = roman_administration_patrikios
			}			
		}
	}

	on_accept = {
		scope:actor = {
			every_relation = {
				type = patrikios
				
				hidden_effect = { 
					
				}
				scope:actor = { 
					remove_relation_patrikios = prev 
					remove_opinion = {
						modifier = roman_administration_dignity
						target = prev
					}
					add_opinion = {
						target = prev
						modifier = roman_administration_fire_dignities
					}
				} 
				remove_character_modifier = roman_administration_patrikios
				
			}
			
		}
		scope:recipient = {
			set_relation_patrikios = scope:actor
			add_opinion = {
				target = scope:actor
				modifier = roman_administration_dignity
				days = 800
			}
			add_character_modifier = {
				modifier = roman_administration_patrikios
			}
		}
	}

	ai_targets = {
		ai_recipients = vassals
	}

	ai_frequency = 48

	ai_will_do = {
		base = 0

		modifier = {
			add = 100
			scope:recipient = {
				NOT = {
					OR = {
						has_relation_rival = scope:actor
						has_relation_nemesis = scope:actor
					}
				}
			}
		}

		modifier = {
			add = -100
			scope:recipient = {
				OR = {
					has_relation_rival = scope:actor
					has_relation_nemesis = scope:actor
				}
			}
		}

		modifier = {
			add = -200
			scope:recipient = {
				opinion = {
					target = scope:actor
					value >= 60
				}
			}
		}

		modifier = {
			add = 200
			scope:recipient = {
				is_adult = yes
				is_female = no
				is_child_of = scope:actor
			}
		}

		modifier = {
			add = 200
			scope:recipient = {
				is_powerful_vassal = yes
				opinion = {
					target = scope:actor
					value <= 0
				}
			}
		}

		modifier = {
			add = -500
			scope:recipient = {
				OR = {
					has_trait = inbred
					has_trait = intellect_bad_3
					has_trait = incapable
				}
			}
		}
	}
}

## Emperor naming an Anthypatos
roman_administration_name_anthypatos = {
	category = interaction_category_vassal

	use_diplomatic_range = yes
	auto_accept = yes

	desc = roman_administration_name_anthypatos_desc

	is_shown = {
		scope:actor = {
			any_held_title = {
				this = title:e_byzantium
			}			
		}
		scope:recipient = { 
			roman_administration_character_is_in_the_empire = yes
			NOT = { has_government = theocracy_government }
			age >= 16
			is_female = no			
			NOT = {
				has_character_modifier = roman_administration_anthypatos
			}		
			NOT = {
				this = scope:actor
			}	
		}
	}

	is_valid = {
		scope:actor = {
			any_held_title = {
				this = title:e_byzantium
			}			
		}
		scope:recipient = { 
			roman_administration_character_is_in_the_empire = yes
			age >= 16
			is_female = no			
			NOT = {
				has_character_modifier = roman_administration_anthypatos
			}			
		}
	}

	on_accept = {
		scope:actor = {
			every_relation = {
				type = anthypatos
				
				hidden_effect = { 
					
				}
				scope:actor = { 
					remove_relation_anthypatos = prev 
					remove_opinion = {
						modifier = roman_administration_dignity
						target = prev
					}
					add_opinion = {
						target = prev
						modifier = roman_administration_fire_dignities
					}
				} 
				remove_character_modifier = roman_administration_anthypatos
				
			}
			
		}
		scope:recipient = {
			set_relation_anthypatos = scope:actor
			add_opinion = {
				target = scope:actor
				modifier = roman_administration_dignity
				days = 800
			}
			add_character_modifier = {
				modifier = roman_administration_anthypatos
			}
		}
	}

	ai_targets = {
		ai_recipients = vassals
	}

	ai_frequency = 48

	ai_will_do = {
		base = 0

		modifier = {
			add = 100
			scope:recipient = {
				NOT = {
					OR = {
						has_relation_rival = scope:actor
						has_relation_nemesis = scope:actor
					}
				}
			}
		}

		modifier = {
			add = -100
			scope:recipient = {
				OR = {
					has_relation_rival = scope:actor
					has_relation_nemesis = scope:actor
				}
			}
		}

		modifier = {
			add = -200
			scope:recipient = {
				opinion = {
					target = scope:actor
					value >= 60
				}
			}
		}

		modifier = {
			add = -500
			scope:recipient = {
				opinion = {
					target = scope:actor
					value >= 80
				}
			}
		}

		modifier = {
			add = 200
			scope:recipient = {
				is_adult = yes
				is_female = no
				is_child_of = scope:actor
			}
		}

		modifier = {
			add = 200
			scope:recipient = {
				is_powerful_vassal = yes
				opinion = {
					target = scope:actor
					value <= 0
				}
			}
		}

		modifier = {
			add = -500
			scope:recipient = {
				OR = {
					has_trait = inbred
					has_trait = intellect_bad_3
					has_trait = incapable
				}
			}
		}
	}
}

## Emperor naming a Magistros
roman_administration_name_magistros = {
	category = interaction_category_vassal

	use_diplomatic_range = yes
	auto_accept = yes

	desc = roman_administration_name_magistros_desc

	is_shown = {
		scope:actor = {
			any_held_title = {
				this = title:e_byzantium
			}			
		}
		scope:recipient = { 
			roman_administration_character_is_in_the_empire = yes
			NOT = { has_government = theocracy_government }
			age >= 16
			is_female = no			
			NOT = {
				has_character_modifier = roman_administration_magistros
			}		
			NOT = {
				this = scope:actor
			}	
		}
	}

	is_valid = {
		scope:actor = {
			any_held_title = {
				this = title:e_byzantium
			}			
		}
		scope:recipient = { 
			roman_administration_character_is_in_the_empire = yes
			age >= 16
			is_female = no			
			NOT = {
				has_character_modifier = roman_administration_magistros
			}			
		}
	}

	on_accept = {
		scope:actor = {
			every_relation = {
				type = magistros
				
				hidden_effect = { 
					
				}
				scope:actor = { 
					remove_relation_magistros = prev 
					remove_opinion = {
						modifier = roman_administration_dignity
						target = prev
					}
					add_opinion = {
						target = prev
						modifier = roman_administration_fire_dignities
					}
				} 
				remove_character_modifier = roman_administration_magistros
				
			}
			
		}
		scope:recipient = {
			set_relation_magistros = scope:actor
			add_opinion = {
				target = scope:actor
				modifier = roman_administration_dignity
				days = 800
			}
			add_character_modifier = {
				modifier = roman_administration_magistros
			}
		}
	}

	ai_targets = {
		ai_recipients = vassals
	}

	ai_frequency = 48

	ai_will_do = {
		base = 0

		modifier = {
			add = 100
			scope:recipient = {
				NOT = {
					OR = {
						has_relation_rival = scope:actor
						has_relation_nemesis = scope:actor
					}
				}
			}
		}

		modifier = {
			add = -100
			scope:recipient = {
				OR = {
					has_relation_rival = scope:actor
					has_relation_nemesis = scope:actor
				}
			}
		}

		modifier = {
			add = -200
			scope:recipient = {
				opinion = {
					target = scope:actor
					value >= 60
				}
			}
		}

		modifier = {
			add = -500
			scope:recipient = {
				opinion = {
					target = scope:actor
					value >= 80
				}
			}
		}

		modifier = {
			add = 200
			scope:recipient = {
				is_adult = yes
				is_female = no
				is_child_of = scope:actor
			}
		}

		modifier = {
			add = 200
			scope:recipient = {
				is_powerful_vassal = yes
				opinion = {
					target = scope:actor
					value <= 0
				}
			}
		}

		modifier = {
			add = -500
			scope:recipient = {
				OR = {
					has_trait = inbred
					has_trait = intellect_bad_3
					has_trait = incapable
				}
			}
		}
	}
}

## Emperor naming a Proedros
roman_administration_name_proedros = {
	category = interaction_category_vassal

	use_diplomatic_range = yes
	auto_accept = yes

	desc = roman_administration_name_proedros_desc

	is_shown = {
		scope:actor = {
			any_held_title = {
				this = title:e_byzantium
			}			
		}
		scope:recipient = { 
			roman_administration_character_is_in_the_empire = yes
			NOT = { has_government = theocracy_government }
			age >= 16
			is_female = no			
			NOT = {
				has_character_modifier = roman_administration_proedros
			}		
			NOT = {
				this = scope:actor
			}	
		}
	}

	is_valid = {
		scope:actor = {
			any_held_title = {
				this = title:e_byzantium
			}			
		}
		scope:recipient = { 
			roman_administration_character_is_in_the_empire = yes
			age >= 16
			is_female = no			
			NOT = {
				has_character_modifier = roman_administration_proedros
			}			
		}
	}

	on_accept = {
		scope:actor = {
			every_relation = {
				type = proedros
				
				hidden_effect = { 
					
				}
				scope:actor = { 
					remove_relation_proedros = prev 
					remove_opinion = {
						modifier = roman_administration_dignity
						target = prev
					}
					add_opinion = {
						target = prev
						modifier = roman_administration_fire_dignities
					}
				} 
				remove_character_modifier = roman_administration_proedros
				
			}
			
		}
		scope:recipient = {
			set_relation_proedros = scope:actor
			add_opinion = {
				target = scope:actor
				modifier = roman_administration_dignity
				days = 800
			}
			add_character_modifier = {
				modifier = roman_administration_proedros
			}
		}
	}

	ai_targets = {
		ai_recipients = vassals
	}

	ai_frequency = 48

	ai_will_do = {
		base = 0

		modifier = {
			add = 100
			scope:recipient = {
				NOT = {
					OR = {
						has_relation_rival = scope:actor
						has_relation_nemesis = scope:actor
					}
				}
			}
		}

		modifier = {
			add = -100
			scope:recipient = {
				OR = {
					has_relation_rival = scope:actor
					has_relation_nemesis = scope:actor
				}
			}
		}

		modifier = {
			add = -200
			scope:recipient = {
				opinion = {
					target = scope:actor
					value >= 60
				}
			}
		}

		modifier = {
			add = -500
			scope:recipient = {
				opinion = {
					target = scope:actor
					value >= 80
				}
			}
		}

		modifier = {
			add = 200
			scope:recipient = {
				is_adult = yes
				is_female = no
				is_child_of = scope:actor
			}
		}

		modifier = {
			add = 200
			scope:recipient = {
				is_powerful_vassal = yes
				opinion = {
					target = scope:actor
					value <= 0
				}
			}
		}

		modifier = {
			add = -500
			scope:recipient = {
				OR = {
					has_trait = inbred
					has_trait = intellect_bad_3
					has_trait = incapable
				}
			}
		}
	}
}

## Emperor naming a Vestarches
roman_administration_name_vestarches = {
	category = interaction_category_vassal

	use_diplomatic_range = yes
	auto_accept = yes

	desc = roman_administration_name_vestarches_desc

	is_shown = {
		scope:actor = {
			any_held_title = {
				this = title:e_byzantium
			}			
		}
		scope:recipient = { 
			roman_administration_character_is_in_the_empire = yes
			NOT = { has_government = theocracy_government }
			age >= 16
			is_female = no			
			NOT = {
				has_character_modifier = roman_administration_vestarches
			}	
			NOT = {
				this = scope:actor
			}		
		}
	}

	is_valid = {
		scope:actor = {
			any_held_title = {
				this = title:e_byzantium
			}			
		}
		scope:recipient = { 
			roman_administration_character_is_in_the_empire = yes
			age >= 16
			is_female = no			
			NOT = {
				has_character_modifier = roman_administration_vestarches
			}			
		}
	}

	on_accept = {
		scope:actor = {
			every_relation = {
				type = vestarches
				
				hidden_effect = { 
					
				}
				scope:actor = { 
					remove_relation_vestarches = prev 
					remove_opinion = {
						modifier = roman_administration_dignity
						target = prev
					}
					add_opinion = {
						target = prev
						modifier = roman_administration_fire_dignities
					}
				} 
				remove_character_modifier = roman_administration_vestarches
				
			}
			
		}
		scope:recipient = {
			set_relation_vestarches = scope:actor
			add_opinion = {
				target = scope:actor
				modifier = roman_administration_dignity
				days = 800
			}
			add_character_modifier = {
				modifier = roman_administration_vestarches
			}
		}
	}

	ai_targets = {
		ai_recipients = vassals
	}

	ai_frequency = 48

	ai_will_do = {
		base = 0

		modifier = {
			add = 100
			scope:recipient = {
				NOT = {
					OR = {
						has_relation_rival = scope:actor
						has_relation_nemesis = scope:actor
					}
				}
			}
		}

		modifier = {
			add = -100
			scope:recipient = {
				OR = {
					has_relation_rival = scope:actor
					has_relation_nemesis = scope:actor
				}
			}
		}

		modifier = {
			add = -200
			scope:recipient = {
				opinion = {
					target = scope:actor
					value >= 60
				}
			}
		}

		modifier = {
			add = -500
			scope:recipient = {
				opinion = {
					target = scope:actor
					value >= 80
				}
			}
		}

		modifier = {
			add = 200
			scope:recipient = {
				is_adult = yes
				is_female = no
				is_child_of = scope:actor
			}
		}

		modifier = {
			add = 200
			scope:recipient = {
				is_powerful_vassal = yes
				opinion = {
					target = scope:actor
					value <= 0
				}
			}
		}

		modifier = {
			add = -500
			scope:recipient = {
				OR = {
					has_trait = inbred
					has_trait = intellect_bad_3
					has_trait = incapable
				}
			}
		}
	}
}

## Emperor naming a Spatharios
roman_administration_name_spatharios = {
	category = interaction_category_vassal

	use_diplomatic_range = yes
	auto_accept = yes

	desc = roman_administration_name_spatharios_desc

	is_shown = {
		scope:actor = {
			any_held_title = {
				this = title:e_byzantium
			}			
		}
		scope:recipient = { 
			roman_administration_character_is_in_the_empire = yes
			NOT = { has_government = theocracy_government }
			age >= 16
			is_female = no			
			NOT = {
				has_character_modifier = roman_administration_spatharios
			}			
			NOT = {
				this = scope:actor
			}
		}
	}

	is_valid = {
		scope:actor = {
			any_held_title = {
				this = title:e_byzantium
			}			
		}
		scope:recipient = { 
			roman_administration_character_is_in_the_empire = yes
			age >= 16
			is_female = no			
			NOT = {
				has_character_modifier = roman_administration_spatharios
			}			
		}
	}

	on_accept = {
		scope:actor = {
			if = {
				limit = {
					num_of_relation_spatharios < 5
				}
				scope:recipient = {
					set_relation_spatharios = scope:actor
					add_opinion = {
						target = scope:actor
						modifier = roman_administration_dignity
						days = 800
					}
					add_character_modifier = {
						modifier = roman_administration_spatharios
					}
				}
			}
			else = {
				random_relation = {
					type = spatharios
					
					hidden_effect = { 
						
					}
					scope:actor = { 
						remove_relation_spatharios = prev 
						remove_opinion = {
							modifier = roman_administration_dignity
							target = prev
						}
						add_opinion = {
							target = prev
							modifier = roman_administration_fire_dignities
						}
					} 
					remove_character_modifier = roman_administration_spatharios
					
				}
				scope:recipient = {
					set_relation_spatharios = scope:actor
					add_opinion = {
						target = scope:actor
						modifier = roman_administration_dignity
						days = 800
					}
					add_character_modifier = {
						modifier = roman_administration_spatharios
					}
				}
			}
			
			
		}
		
	}

	ai_targets = {
		ai_recipients = vassals
	}

	ai_frequency = 48

	ai_will_do = {
		base = 0

		modifier = {
			add = 100
			scope:recipient = {
				NOT = {
					OR = {
						has_relation_rival = scope:actor
						has_relation_nemesis = scope:actor
					}
				}
			}
		}

		modifier = {
			add = -100
			scope:recipient = {
				OR = {
					has_relation_rival = scope:actor
					has_relation_nemesis = scope:actor
				}
			}
		}

		modifier = {
			add = -200
			scope:recipient = {
				opinion = {
					target = scope:actor
					value >= 60
				}
			}
		}

		modifier = {
			add = -500
			scope:recipient = {
				opinion = {
					target = scope:actor
					value >= 80
				}
			}
		}

		modifier = {
			add = 200
			scope:recipient = {
				is_adult = yes
				is_female = no
				is_child_of = scope:actor
			}
		}

		modifier = {
			add = 200
			scope:recipient = {
				is_powerful_vassal = yes
				opinion = {
					target = scope:actor
					value <= 0
				}
			}
		}

		modifier = {
			add = -500
			scope:recipient = {
				OR = {
					has_trait = inbred
					has_trait = intellect_bad_3
					has_trait = incapable
				}
			}
		}
	}
}

# roman_administration_revoke_dignity = {
# 	category = interaction_category_vassal

# 	use_diplomatic_range = yes
# 	auto_accept = yes

# 	desc = roman_administration_revoke_dignity_desc

# 	is_shown = {
# 		scope:actor = {
# 			any_held_title = {
# 				this = title:e_byzantium
# 			}			
# 		}
# 		scope:recipient = { 
# 			roman_administration_character_is_in_the_empire = yes
# 			NOT = { has_government = theocracy_government }
# 			age >= 16
# 			is_female = no			
# 			OR = {
# 				has_character_modifier = roman_administration_protospatharios
# 				has_character_modifier = roman_administration_patrikios
# 				has_character_modifier = roman_administration_anthypatos
# 				has_character_modifier = roman_administration_magistros
# 				has_character_modifier = roman_administration_vestarches
# 				has_character_modifier = roman_administration_proedros
# 				has_character_modifier = roman_administration_spatharios
# 			}		
# 		}
# 	}

# 	is_valid = {
# 		scope:actor = {
# 			any_held_title = {
# 				this = title:e_byzantium
# 			}			
# 		}
# 		scope:recipient = { 
# 			roman_administration_character_is_in_the_empire = yes
# 			age >= 16
# 			is_female = no			
# 			OR = {
# 				has_character_modifier = roman_administration_protospatharios
# 				has_character_modifier = roman_administration_patrikios
# 				has_character_modifier = roman_administration_anthypatos
# 				has_character_modifier = roman_administration_magistros
# 				has_character_modifier = roman_administration_vestarches
# 				has_character_modifier = roman_administration_proedros
# 				has_character_modifier = roman_administration_spatharios
# 			}				
# 		}
# 	}

# 	on_accept = {
# 		scope:actor = {
# 			if = {
# 				limit = {
# 					scope:recipient = {

# 					}
# 				}
# 				every_relation = {
# 					type = spatharios
					
# 					hidden_effect = { 
						
# 					}
# 					scope:actor = { 
# 						remove_relation_spatharios = prev 
# 						remove_opinion = {
# 							modifier = roman_administration_dignity
# 							target = prev
# 						}
# 						add_opinion = {
# 							target = prev
# 							modifier = roman_administration_fire_dignities
# 						}
# 					} 
# 					remove_character_modifier = roman_administration_spatharios
					
# 				}
# 			}
# 		}
# 		scope:recipient = {
# 			remove_character_modifier = roman_administration_protospatharios
# 			remove_character_modifier = roman_administration_patrikios
# 			remove_character_modifier = roman_administration_anthypatos
# 			remove_character_modifier = roman_administration_magistros
# 			remove_character_modifier = roman_administration_vestarches
# 			remove_character_modifier = roman_administration_proedros
# 			remove_character_modifier = roman_administration_spatharios
# 		}
# 	}
# }

#############################################
# REVOLTS AND SCHEME						#
#############################################
